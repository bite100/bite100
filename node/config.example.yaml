# ============================================================
# P2P 节点配置
# 防 Sybil：NodeRewards 合约限制每钱包最多 3 节点（MAX_NODES_PER_WALLET）
# 使用：复制为 config.yaml，然后按需修改
# ============================================================
#
# 【小白必改】
#  - reward_wallet：你的钱包地址（0x 开头），用于领取节点奖励。可通过环境变量 REWARD_WALLET 或启动参数 -reward-wallet 设置
#
# 【其余可不改】本地开发或一键脚本会自动用默认值
# ============================================================

node:
  type: relay        # relay=中继（默认）| storage=存储 | match=撮合
  data_dir: ./data
  listen:
    - /ip4/0.0.0.0/tcp/4001
  reward_wallet: ""  # 必填：领奖钱包（0x 开头 42 字符）

network:
  bootstrap: []      # 留空也能运行；填了则自动连接这些节点
  use_tor: false     # 高级：true=经 Tor 代理出站，隐藏 IP
  tor_socks_addr: "127.0.0.1:9050"
  topics:            # 一般无需改
    - /p2p-exchange/sync/trades
    - /p2p-exchange/sync/orderbook
    - /p2p-exchange/order/new
    - /p2p-exchange/order/cancel
    - /p2p-exchange/trade/executed

relay:
  rate_limit_bytes_per_sec_per_peer: 0
  rate_limit_msgs_per_sec_per_peer: 0

storage:
  retention_months: 0   # 0=两周，>0=月数

match:
  pairs:
    TKA/TKB:
      token0: ""
      token1: ""

metrics:
  proof_period_days: 7
  proof_output_dir: ""

api:
  listen: ":8080"    # 填 :8080 即开启，前端可连；空=不开启
  rate_limit_orders_per_minute: 0
  # 黑名单：拒绝这些地址的下单/撤单（Spam 防护，可选，多数节点可留空）
  # 示例：
  # blocked_traders:
  #   - "0x000000000000000000000000000000000000dEaD"
  blocked_traders: []

chain:               # 可选，从链上拉取历史成交时填
  rpc_url: ""
  chain_id: 11155111
  amm_pool: ""
  token0: ""
  token1: ""
  # §12.3 多 Relayer：多个 relayer API 地址，按轮询选择，避免单点
  relayer_endpoints: []