# å¿«é€Ÿä¼˜åŒ–å®ç°æŒ‡å—

> åŸºäºç”¨æˆ·åé¦ˆå’Œé¡¹ç›®å®šä½ï¼Œæ•´ç†çš„é«˜ä¼˜å…ˆçº§å¿«é€Ÿä¼˜åŒ–æ–¹æ¡ˆï¼ˆ1-2 å¤©å¯å®Œæˆï¼‰

---

## ä¸€ã€ä»·æ ¼å‚è€ƒé›†æˆï¼ˆ< 1 å¤©ï¼‰

### 1.1 ç›®æ ‡

åœ¨ Swap è¡¨å•å’Œè®¢å•ç°¿æ—æ˜¾ç¤º CoinGecko å¸‚åœºå‚è€ƒä»·ï¼Œè®©ç”¨æˆ·æŒ‚é™ä»·å•æ—¶æœ‰åŸºå‡†ï¼Œçªå‡º"é›¶æ»‘ç‚¹é™ä»·" vs ä¸»æµé’±åŒ…çš„ AMM æ»‘ç‚¹ä¼˜åŠ¿ã€‚

### 1.2 å®ç°æ­¥éª¤

#### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
cd frontend
npm install axios
```

#### æ­¥éª¤ 2ï¼šåˆ›å»ºä»·æ ¼ Hook

åˆ›å»º `frontend/src/hooks/useTokenPrice.ts`ï¼š

```typescript
import { useState, useEffect } from 'react'
import axios from 'axios'

interface TokenPrice {
  usd: number
  usd_24h_change: number
}

interface UseTokenPriceResult {
  price: TokenPrice | null
  loading: boolean
  error: Error | null
}

/**
 * è·å–ä»£å¸ä»·æ ¼ï¼ˆCoinGecko APIï¼‰
 * @param tokenId CoinGecko ä»£å¸ IDï¼ˆå¦‚ 'ethereum', 'tether'ï¼‰
 * @param refreshInterval åˆ·æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 30 ç§’
 */
export function useTokenPrice(
  tokenId: string,
  refreshInterval: number = 30000
): UseTokenPriceResult {
  const [price, setPrice] = useState<TokenPrice | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    const fetchPrice = async () => {
      try {
        setLoading(true)
        setError(null)
        
        // CoinGecko å…è´¹ APIï¼ˆæ— éœ€ keyï¼Œä½†æœ‰é€Ÿç‡é™åˆ¶ï¼‰
        const res = await axios.get(
          `https://api.coingecko.com/api/v3/simple/price`,
          {
            params: {
              ids: tokenId,
              vs_currencies: 'usd',
              include_24hr_change: true,
            },
          }
        )

        const data = res.data[tokenId]
        if (data) {
          setPrice({
            usd: data.usd || 0,
            usd_24h_change: data.usd_24h_change || 0,
          })
        } else {
          setError(new Error(`Token ${tokenId} not found`))
        }
      } catch (err) {
        console.error('Price fetch failed:', err)
        setError(err instanceof Error ? err : new Error('Failed to fetch price'))
      } finally {
        setLoading(false)
      }
    }

    fetchPrice()
    const interval = setInterval(fetchPrice, refreshInterval)
    return () => clearInterval(interval)
  }, [tokenId, refreshInterval])

  return { price, loading, error }
}

/**
 * è·å–å¤šä¸ªä»£å¸ä»·æ ¼
 */
export function useTokenPrices(
  tokenIds: string[],
  refreshInterval: number = 30000
): Record<string, UseTokenPriceResult> {
  const results: Record<string, UseTokenPriceResult> = {}
  
  tokenIds.forEach((id) => {
    results[id] = useTokenPrice(id, refreshInterval)
  })
  
  return results
}
```

#### æ­¥éª¤ 3ï¼šåœ¨ Swap ç»„ä»¶ä¸­ä½¿ç”¨

æ›´æ–° `frontend/src/components/OrderForm.tsx`ï¼š

```typescript
import { useTokenPrice } from '../hooks/useTokenPrice'

// åœ¨ç»„ä»¶ä¸­
const { price: tokenAPrice, loading: loadingA } = useTokenPrice('your-tka-coingecko-id')
const { price: tokenBPrice, loading: loadingB } = useTokenPrice('your-tkb-coingecko-id')

// åœ¨ JSX ä¸­æ˜¾ç¤º
{loadingA || loadingB ? (
  <span className="text-sm text-gray-500">åŠ è½½å‚è€ƒä»·...</span>
) : (
  <div className="text-sm">
    <span className="text-gray-600">å¸‚åœºå‚è€ƒä»·: </span>
    <span className="font-medium">
      ${tokenAPrice?.usd.toFixed(4)} / ${tokenBPrice?.usd.toFixed(4)}
    </span>
    {tokenAPrice?.usd_24h_change !== undefined && (
      <span className={`ml-2 ${tokenAPrice.usd_24h_change >= 0 ? 'text-green-600' : 'text-red-600'}`}>
        ({tokenAPrice.usd_24h_change >= 0 ? '+' : ''}{tokenAPrice.usd_24h_change.toFixed(2)}%)
      </span>
    )}
    <span className="text-gray-500 ml-2">
      Â· P2P é›¶æ»‘ç‚¹é™ä»·å• vs ä¸»æµé’±åŒ… AMM æ»‘ç‚¹ 0.5%+
    </span>
  </div>
)}
```

#### æ­¥éª¤ 4ï¼šåœ¨è®¢å•ç°¿ä¸­æ˜¾ç¤º

æ›´æ–° `frontend/src/OrderBookSection.tsx`ï¼Œåœ¨è®¢å•ç°¿é¡¶éƒ¨æ˜¾ç¤ºå‚è€ƒä»·ã€‚

### 1.3 CoinGecko ä»£å¸ ID é…ç½®

åœ¨ `frontend/src/config/tokens.ts` ä¸­æ·»åŠ ï¼š

```typescript
export const COINGECKO_TOKEN_IDS: Record<string, string> = {
  // Sepolia æµ‹è¯•ä»£å¸ï¼ˆéœ€è¦æ›¿æ¢ä¸ºå®é™… CoinGecko IDï¼‰
  '0x678195277dc8F84F787A4694DF42F3489eA757bf': 'ethereum', // TKA ç¤ºä¾‹
  '0x9Be241a0bF1C2827194333B57278d1676494333a': 'tether',   // TKB ç¤ºä¾‹
}
```

### 1.4 æµ‹è¯•

1. å¼€å‘ç¯å¢ƒæµ‹è¯•ï¼š`npm run dev`
2. æ£€æŸ¥ä»·æ ¼æ˜¯å¦æ­£ç¡®æ˜¾ç¤º
3. æµ‹è¯•ç½‘ç»œé”™è¯¯å¤„ç†
4. éªŒè¯ 30 ç§’è‡ªåŠ¨åˆ·æ–°

### 1.5 ä¸Šçº¿åä¼˜åŒ–

- ç”³è¯· CoinGecko Pro API keyï¼ˆæé«˜é€Ÿç‡é™åˆ¶ï¼‰
- æ·»åŠ ä»·æ ¼ç¼“å­˜ï¼ˆå‡å°‘ API è°ƒç”¨ï¼‰
- æ”¯æŒå¤šä¸ªä»·æ ¼æºï¼ˆCoinGeckoã€CoinMarketCap ç­‰ï¼‰

---

## äºŒã€æ‰‹æœºç«¯é’±åŒ…é›†æˆä¼˜åŒ–ï¼ˆ1-2 å°æ—¶ï¼‰

### 2.1 ç›®æ ‡

ä½¿ç”¨ wagmi + RainbowKit å‡çº§é’±åŒ…è¿æ¥ï¼Œæå‡æ‰‹æœºè¿æ¥æˆåŠŸç‡åˆ° 90%+ï¼Œå¼ºåŒ–"æ‰‹æœºä¼˜å…ˆ"å®šä½ã€‚

**æ ¸å¿ƒä¼˜åŒ–**ï¼š
- ä¼˜å…ˆä½¿ç”¨ deep link ç›´æ¥æ‰“å¼€é’±åŒ… App
- å¤±è´¥æ—¶ fallback åˆ° QR ç  + æ‰‹åŠ¨æ‰«ç 
- å¼•å¯¼ç”¨æˆ·ä½¿ç”¨å†…ç½®æµè§ˆå™¨ï¼ˆæˆåŠŸç‡ 95%+ï¼‰

### 2.2 ç”¨æˆ·ä¾§ Workaroundï¼ˆæ— éœ€æ”¹ä»£ç ï¼Œç«‹å³å¯ç”¨ï¼‰

**æœ€æœ‰æ•ˆæ–¹æ³•**ï¼š
1. **ä¸è¦ç›´æ¥åœ¨æ‰‹æœºæµè§ˆå™¨ç‚¹å‡»**
2. å…ˆæ‰‹åŠ¨æ‰“å¼€é’±åŒ… Appï¼ˆå¦‚ MetaMask / Trust Walletï¼‰
3. åœ¨é’±åŒ… App çš„**å†…ç½®æµè§ˆå™¨**è¾“å…¥é“¾æ¥ï¼š
   - `https://p2p-p2p.github.io/p2p/` æˆ–
   - Vercel éƒ¨ç½²åœ°å€
4. åœ¨å†…ç½®æµè§ˆå™¨ç‚¹å‡» Connect â†’ é’±åŒ…ä¼šç›´æ¥å¼¹å‡ºç¡®è®¤ï¼ˆç»•è¿‡å¤–éƒ¨æµè§ˆå™¨ deep link é™åˆ¶ï¼‰

**ä¸ºä»€ä¹ˆæœ‰æ•ˆ**ï¼š
- å†…ç½®æµè§ˆå™¨å·²å¤„äºé’±åŒ…ç¯å¢ƒï¼Œdeep link ç›´æ¥å†…éƒ¨å¤„ç†
- æˆåŠŸç‡ 95%+
- é€‚ç”¨äº MetaMaskã€Trust Walletã€Binance Web3ã€OKX Wallet ç­‰

### 2.3 ä»£ç å±‚é¢ä¼˜åŒ–ï¼ˆæ¨èå‡çº§åˆ° RainbowKit + wagmiï¼‰

**å½“å‰é—®é¢˜**ï¼š
- å¯èƒ½ç”¨æ—§ç‰ˆ WalletConnect æˆ–ç®€å• ethers provider
- å¯¼è‡´ mobile linking ä¸ç¨³å®š

**è§£å†³æ–¹æ¡ˆ**ï¼šå‡çº§åˆ° RainbowKitï¼ˆwagmi ç”Ÿæ€ï¼‰ï¼Œè‡ªåŠ¨å¤„ç† deep linkã€QRã€ç§»åŠ¨é‡å®šå‘ã€‚

#### æ­¥éª¤ 1ï¼šå®‰è£…ä¾èµ–

```bash
cd frontend
npm install wagmi viem @rainbow-me/rainbowkit @tanstack/react-query
```

#### æ­¥éª¤ 2ï¼šæ›´æ–° vite.config.tsï¼ˆåŠ  PWA æ”¯æŒï¼‰

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    react(),
    VitePWA({
      registerType: 'autoUpdate',
      includeAssets: ['favicon.ico', 'apple-touch-icon.png', 'masked-icon.svg'],
      manifest: {
        name: 'P2P DEX',
        short_name: 'P2PDEX',
        description: 'P2P Decentralized Exchange',
        theme_color: '#ffffff',
        icons: [
          {
            src: 'pwa-192x192.png',
            sizes: '192x192',
            type: 'image/png'
          },
          {
            src: 'pwa-512x512.png',
            sizes: '512x512',
            type: 'image/png'
          }
        ]
      }
    })
  ]
})
```

#### æ­¥éª¤ 3ï¼šé…ç½® wagmi

åˆ›å»º `frontend/src/config/wagmi.ts`ï¼š

```typescript
import { getDefaultConfig } from '@rainbow-me/rainbowkit'
import { sepolia, mainnet, polygon } from 'wagmi/chains'

export const wagmiConfig = getDefaultConfig({
  appName: 'P2P DEX',
  projectId: 'YOUR_WALLETCONNECT_PROJECT_ID', // ä» https://cloud.walletconnect.com å…è´¹æ³¨å†Œ
  chains: [sepolia, mainnet, polygon],
  ssr: false,
})
```

#### æ­¥éª¤ 4ï¼šæ›´æ–°ä¸»åº”ç”¨å…¥å£

æ›´æ–° `frontend/src/main.tsx`ï¼š

```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'

import '@rainbow-me/rainbowkit/styles.css'
import { RainbowKitProvider } from '@rainbow-me/rainbowkit'
import { WagmiProvider } from 'wagmi'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { wagmiConfig } from './config/wagmi'

const queryClient = new QueryClient()

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <WagmiProvider config={wagmiConfig}>
      <QueryClientProvider client={queryClient}>
        <RainbowKitProvider>
          <App />
        </RainbowKitProvider>
      </QueryClientProvider>
    </WagmiProvider>
  </React.StrictMode>,
)
```

#### æ­¥éª¤ 5ï¼šä½¿ç”¨ RainbowKit ConnectButton

æ›´æ–° `frontend/src/App.tsx` ä¸­çš„è¿æ¥é’±åŒ…éƒ¨åˆ†ï¼š

```typescript
import { ConnectButton } from '@rainbow-me/rainbowkit'
import { MobileWalletHint } from './components/MobileWalletHint'

function App() {
  return (
    <div>
      <MobileWalletHint />
      <ConnectButton />
      {/* ä½ çš„å…¶ä»–ç»„ä»¶ */}
    </div>
  )
}
```

#### æ­¥éª¤ 6ï¼šæ·»åŠ æ‰‹æœºç«¯æç¤ºç»„ä»¶

åˆ›å»º `frontend/src/components/MobileWalletHint.tsx`ï¼š

```typescript
import { useEffect, useState } from 'react'

export function MobileWalletHint() {
  const [isMobile, setIsMobile] = useState(false)
  const [showHint, setShowHint] = useState(false)

  useEffect(() => {
    const mobile = /Mobi|Android|iPhone/i.test(navigator.userAgent)
    setIsMobile(mobile)
    
    // é¦–æ¬¡è¿æ¥æ—¶æ˜¾ç¤ºæç¤º
    if (mobile && !localStorage.getItem('mobile-hint-shown')) {
      setShowHint(true)
      localStorage.setItem('mobile-hint-shown', 'true')
    }
  }, [])

  if (!isMobile || !showHint) return null

  return (
    <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
      <div className="flex justify-between items-start">
        <div>
          <p className="text-sm text-blue-800 font-semibold mb-1">
            ğŸ“± æ‰‹æœºç”¨æˆ·æ¨è
          </p>
          <p className="text-sm text-blue-700">
            åœ¨ <strong>MetaMask/Trust Wallet App å†…ç½®æµè§ˆå™¨</strong>æ‰“å¼€æ­¤é“¾æ¥ï¼Œè¿æ¥æˆåŠŸç‡æ›´é«˜ï¼
          </p>
        </div>
        <button
          onClick={() => setShowHint(false)}
          className="text-blue-600 hover:text-blue-800"
        >
          âœ•
        </button>
      </div>
    </div>
  )
}
```

#### æ­¥éª¤ 7ï¼šæ·»åŠ æ–­å¼€è¿æ¥åŠŸèƒ½

åˆ›å»º `frontend/src/components/DisconnectButton.tsx`ï¼š

```typescript
import { useDisconnect } from 'wagmi'

export function DisconnectButton() {
  const { disconnect } = useDisconnect()

  return (
    <button
      onClick={() => disconnect()}
      className="btn secondary text-sm"
    >
      æ–­å¼€æ‰€æœ‰ WalletConnect ä¼šè¯
    </button>
  )
}
```

### 2.4 WalletConnect Cloud è®¾ç½®

1. è®¿é—® https://cloud.walletconnect.com/
2. å…è´¹æ³¨å†Œè´¦å·
3. åˆ›å»ºé¡¹ç›®ï¼Œè·å– Project ID
4. å°† Project ID å¡«å…¥ `wagmi.ts` é…ç½®

### 2.5 å…¶ä»–æ‰‹æœºä¼˜åŒ–

#### å¼ºåˆ¶ HTTPS
- âœ… ç¡®ä¿ Vercel/GitHub Pages éƒ¨ç½²ï¼ˆå·² HTTPSï¼‰
- âœ… é¿å…æ··åˆå†…å®¹é˜»å¡

#### æ¸…æ—§ Session
- âœ… æ·»åŠ "æ–­å¼€æ‰€æœ‰ WalletConnect ä¼šè¯"æŒ‰é’®
- âœ… ä½¿ç”¨ `useDisconnect` Hook

#### é¦–æ¬¡è¿æ¥æç¤º
- âœ… æ£€æµ‹ç§»åŠ¨è®¾å¤‡
- âœ… é¦–æ¬¡è¿æ¥æ—¶æ˜¾ç¤ºæç¤ºå¼¹çª—
- âœ… ä½¿ç”¨ localStorage è®°å½•å·²æ˜¾ç¤º

### 2.6 æµ‹è¯•æ­¥éª¤

1. **ç”¨ Vercel é‡æ–°éƒ¨ç½²**ï¼ˆimport GitHub â†’ frontend ç›®å½•ï¼‰
2. **æ‰‹æœºæµ‹è¯•**ï¼š
   - æ‰“å¼€ MetaMask App â†’ å†…ç½®æµè§ˆå™¨ â†’ è¾“å…¥é“¾æ¥ â†’ ç‚¹å‡» Connect
   - è§‚å¯Ÿæ˜¯å¦ç›´æ¥å¼¹å‡ºç¡®è®¤
   - è‹¥å¤±è´¥ï¼Œæ‰« QR æµ‹è¯•
3. **æ¢é’±åŒ…æµ‹è¯•**ï¼š
   - Trust Wallet / Binance Web3 é‡å¤æµ‹è¯•
   - éªŒè¯ deep link å’Œ QR fallback

### 2.7 é¢„æœŸæ•ˆæœ

- âœ… RainbowKit è‡ªåŠ¨æ˜¾ç¤ºé’±åŒ…åˆ—è¡¨ï¼ˆMetaMaskã€Trustã€Binance ç­‰ï¼‰
- âœ… æ‰‹æœºç‚¹å‡»æ—¶ä¼˜å…ˆ deep link æ‰“å¼€ Appï¼ˆwc://ï¼‰
- âœ… å¦‚æœå¤±è´¥ï¼Œè‡ªåŠ¨ fallback åˆ° QR ç 
- âœ… æ”¯æŒè‡ªåŠ¨æ·»åŠ ç½‘ç»œï¼ˆsepolia ç­‰ï¼‰
- âœ… **æ‰‹æœºç‚¹å‡»æ‰“å¼€å¤–éƒ¨é’±åŒ…çš„æˆåŠŸç‡æå‡åˆ° 90%+**ï¼ˆä¸»æµ DEX å¦‚ Uniswap ä¹Ÿç”¨ç±»ä¼¼æ–¹å¼ï¼‰

---

## ä¸‰ã€æ‰‹ç»­è´¹é€æ˜åŒ–ï¼ˆ< 1 å¤©ï¼‰

### 3.1 ç›®æ ‡

åœ¨ç»“ç®—/æ’®åˆé¡µé¢æ˜¾ç¤º"é¢„è®¡æ‰‹ç»­è´¹"å’Œ"åˆ†æˆå»å‘"ï¼Œçªå‡ºè‡ªå®šä¹‰åˆ†æˆ vs ä¸»æµé’±åŒ…çš„"é»‘ç®±è´¹"ã€‚

### 3.2 å®ç°æ­¥éª¤

#### æ­¥éª¤ 1ï¼šåˆ›å»º Gas ä¼°ç®— Hook

åˆ›å»º `frontend/src/hooks/useGasEstimate.ts`ï¼š

```typescript
import { useState, useEffect } from 'react'
import { BrowserProvider, Contract } from 'ethers'
import { getProvider } from '../utils'
import { SETTLEMENT_ADDRESS, SETTLEMENT_ABI } from '../config'

interface GasEstimate {
  gasLimit: bigint
  gasPrice: bigint
  totalCost: bigint // gasLimit * gasPrice
  usdCost: number // è½¬æ¢ä¸º USDï¼ˆå¯é€‰ï¼‰
}

/**
 * ä¼°ç®—äº¤æ˜“ Gas è´¹ç”¨
 */
export function useGasEstimate(
  method: string,
  params: unknown[],
  enabled: boolean = true
) {
  const [estimate, setEstimate] = useState<GasEstimate | null>(null)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<Error | null>(null)

  useEffect(() => {
    if (!enabled || !method) return

    const estimateGas = async () => {
      try {
        setLoading(true)
        setError(null)

        const provider = getProvider()
        if (!provider) {
          throw new Error('Provider not available')
        }

        const contract = new Contract(SETTLEMENT_ADDRESS, SETTLEMENT_ABI, provider)
        const gasLimit = await contract[method].estimateGas(...params)
        const feeData = await provider.getFeeData()
        const gasPrice = feeData.gasPrice || 0n

        const totalCost = gasLimit * gasPrice
        // å¯é€‰ï¼šè½¬æ¢ä¸º USDï¼ˆéœ€è¦ ETH/USD ä»·æ ¼ï¼‰
        const usdCost = 0 // TODO: å®ç°ä»·æ ¼è½¬æ¢

        setEstimate({
          gasLimit,
          gasPrice,
          totalCost,
          usdCost,
        })
      } catch (err) {
        console.error('Gas estimate failed:', err)
        setError(err instanceof Error ? err : new Error('Failed to estimate gas'))
      } finally {
        setLoading(false)
      }
    }

    estimateGas()
  }, [method, JSON.stringify(params), enabled])

  return { estimate, loading, error }
}
```

#### æ­¥éª¤ 2ï¼šåˆ›å»ºæ‰‹ç»­è´¹æ˜¾ç¤ºç»„ä»¶

åˆ›å»º `frontend/src/components/FeeDisplay.tsx`ï¼š

```typescript
import { formatEther } from 'ethers'
import { useGasEstimate } from '../hooks/useGasEstimate'

interface FeeDisplayProps {
  tradeAmount: bigint
  platformFeePercent: number // 0.5 = 0.5%
  feeDistribution: {
    nodes: number // 20 = 20%
    developers: number // 30 = 30%
    liquidity: number // 50 = 50%
  }
}

export function FeeDisplay({
  tradeAmount,
  platformFeePercent,
  feeDistribution,
}: FeeDisplayProps) {
  const platformFee = (tradeAmount * BigInt(Math.floor(platformFeePercent * 100))) / 10000n
  const { estimate: gasEstimate, loading } = useGasEstimate('settleTrade', [], false)

  return (
    <div className="bg-gray-50 rounded-lg p-4 space-y-2">
      <h3 className="font-semibold text-sm mb-2">é¢„è®¡è´¹ç”¨</h3>
      
      <div className="space-y-1 text-sm">
        <div className="flex justify-between">
          <span className="text-gray-600">å¹³å°æ‰‹ç»­è´¹ï¼š</span>
          <span className="font-medium">{platformFeePercent}%</span>
        </div>
        
        {loading ? (
          <div className="text-gray-500">è®¡ç®— Gas è´¹ç”¨...</div>
        ) : gasEstimate ? (
          <div className="flex justify-between">
            <span className="text-gray-600">Gas è´¹ç”¨ï¼š</span>
            <span className="font-medium text-green-600">
              {formatEther(gasEstimate.totalCost)} ETH
            </span>
            <span className="text-gray-500 text-xs ml-2">(relayer ä»£ä»˜)</span>
          </div>
        ) : null}
      </div>

      <div className="border-t pt-2 mt-2">
        <h4 className="font-semibold text-xs mb-1">æ‰‹ç»­è´¹åˆ†æˆå»å‘ï¼š</h4>
        <div className="space-y-1 text-xs text-gray-600">
          <div className="flex justify-between">
            <span>èŠ‚ç‚¹è¿è¡Œè€…ï¼š</span>
            <span>{feeDistribution.nodes}%</span>
          </div>
          <div className="flex justify-between">
            <span>å¼€å‘è€…ï¼š</span>
            <span>{feeDistribution.developers}%</span>
          </div>
          <div className="flex justify-between">
            <span>æµåŠ¨æ€§æä¾›è€…ï¼š</span>
            <span>{feeDistribution.liquidity}%</span>
          </div>
        </div>
      </div>

      <div className="bg-blue-50 border border-blue-200 rounded p-2 mt-2">
        <p className="text-xs text-blue-800">
          ğŸ’¡ <strong>å¯¹æ¯”ä¸»æµé’±åŒ…ï¼š</strong>ä¸»æµé’±åŒ… 0.5% + éšå«æ»‘ç‚¹ 0.5%+ï¼Œæˆ‘ä»¬ 0.5% + é›¶æ»‘ç‚¹ + é€æ˜åˆ†æˆ
        </p>
      </div>
    </div>
  )
}
```

#### æ­¥éª¤ 3ï¼šåœ¨äº¤æ˜“ç¡®è®¤é¡µé¢ä½¿ç”¨

åœ¨ `frontend/src/components/OrderForm.tsx` æˆ–ç»“ç®—é¡µé¢ä¸­æ·»åŠ ï¼š

```typescript
import { FeeDisplay } from './FeeDisplay'

// åœ¨äº¤æ˜“ç¡®è®¤æ—¶æ˜¾ç¤º
<FeeDisplay
  tradeAmount={orderAmount}
  platformFeePercent={0.5}
  feeDistribution={{
    nodes: 20,
    developers: 30,
    liquidity: 50,
  }}
/>
```

### 3.3 æµ‹è¯•

1. æµ‹è¯•ä¸åŒäº¤æ˜“é‡‘é¢çš„æ‰‹ç»­è´¹è®¡ç®—
2. éªŒè¯ Gas ä¼°ç®—å‡†ç¡®æ€§
3. æ£€æŸ¥è´¹ç”¨æ˜¾ç¤ºæ ¼å¼
4. æµ‹è¯•åˆ†æˆæ¯”ä¾‹æ˜¾ç¤º

---

## å››ã€é¡¹ç›®æ„ä¹‰å¼ºåŒ–ï¼ˆ30 åˆ†é’Ÿï¼‰

### 4.1 æ›´æ–° README

åœ¨ `README.md` ä¸­æ·»åŠ "ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬"ç« èŠ‚ï¼ˆå·²æ·»åŠ ï¼Œå¯è¿›ä¸€æ­¥ä¼˜åŒ–ï¼‰ã€‚

### 4.2 æ·»åŠ å¯¹æ¯”è¯´æ˜

åœ¨ `docs/é¡¹ç›®ä»·å€¼ä¸å®šä½.md` ä¸­å·²åŒ…å«å¯¹æ¯”è¡¨æ ¼ï¼Œå¯åœ¨ README ä¸­å¼•ç”¨ã€‚

---

## äº”ã€å®æ–½ä¼˜å…ˆçº§

### ç«‹å³å®æ–½ï¼ˆä»Šå¤©ï¼‰

1. âœ… **ä»·æ ¼å‚è€ƒé›†æˆ**ï¼ˆ< 1 å¤©ï¼‰- æœ€ç®€å•è§æ•ˆ
2. âœ… **æ‰‹ç»­è´¹é€æ˜åŒ–**ï¼ˆ< 1 å¤©ï¼‰- å¼ºåŒ–å·®å¼‚åŒ–

### æœ¬å‘¨å®æ–½

3. âœ… **æ‰‹æœºç«¯é’±åŒ…ä¼˜åŒ–**ï¼ˆ1 å¤©ï¼‰- æå‡ç”¨æˆ·ä½“éªŒ
4. âœ… **é¡¹ç›®æ„ä¹‰å¼ºåŒ–**ï¼ˆ30 åˆ†é’Ÿï¼‰- æ›´æ–°æ–‡æ¡£

---

## å…­ã€æµ‹è¯•æ¸…å•

### ä»·æ ¼å‚è€ƒ
- [ ] CoinGecko API è°ƒç”¨æ­£å¸¸
- [ ] ä»·æ ¼æ­£ç¡®æ˜¾ç¤º
- [ ] 30 ç§’è‡ªåŠ¨åˆ·æ–°
- [ ] ç½‘ç»œé”™è¯¯å¤„ç†
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

### é’±åŒ…è¿æ¥
- [ ] iOS Safari æµ‹è¯•
- [ ] Android Chrome æµ‹è¯•
- [ ] MetaMask App å†…ç½®æµè§ˆå™¨
- [ ] Trust Wallet App
- [ ] è‡ªåŠ¨æ·»åŠ ç½‘ç»œåŠŸèƒ½

### æ‰‹ç»­è´¹æ˜¾ç¤º
- [ ] æ‰‹ç»­è´¹è®¡ç®—æ­£ç¡®
- [ ] Gas ä¼°ç®—å‡†ç¡®
- [ ] åˆ†æˆæ¯”ä¾‹æ˜¾ç¤ºæ­£ç¡®
- [ ] å¯¹æ¯”è¯´æ˜æ¸…æ™°

---

## ä¸ƒã€ç›¸å…³æ–‡æ¡£

- [ä¼˜åŒ–ä¸æ”¹è¿›æ¸…å•](./ä¼˜åŒ–ä¸æ”¹è¿›æ¸…å•.md)
- [é¡¹ç›®ä»·å€¼ä¸å®šä½](./é¡¹ç›®ä»·å€¼ä¸å®šä½.md)
- [æ‰‹æœºç«¯å¼€å‘æŒ‡å—](./æ‰‹æœºç«¯å¼€å‘æŒ‡å—.md)

---

*æœ¬æ–‡æ¡£æä¾›å¿«é€Ÿä¼˜åŒ–çš„å…·ä½“å®ç°æ­¥éª¤ï¼Œå»ºè®®æŒ‰ä¼˜å…ˆçº§é€æ­¥å®æ–½ã€‚*
