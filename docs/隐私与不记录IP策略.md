# 隐私与不记录 IP 策略

本文档说明 P2P 节点与前端在用户 IP 地址方面的处理策略。

## 策略概述

**我们不持久化存储用户 IP 地址**。节点与前端遵循「最小收集」原则，仅在必要时临时使用 IP，且不写入数据库或日志文件。

## 节点侧

- **限流**：API 下单速率限制（`api.rate_limit_orders_per_minute`）按 IP 进行，数据仅存于**内存**中，进程重启即清空，不落盘。
- **日志**：节点日志不输出完整 IP；若需记录限流等事件，使用脱敏后的形式（如 `192.168.1.xxx`）。
- **存储**：订单、成交、证明等数据均不关联 IP，仅关联链上地址（Trader 等）。

## 前端侧

- 前端为纯静态/PWA，不向后端上报用户 IP。
- 用户通过钱包签名与链上地址参与交易，无需提供 IP 等身份信息。

## 实施要点

- 限流使用 `remoteIP(r)` 识别来源，但不写入任何持久化存储。
- 新增日志时，若涉及来源标识，应使用 `MaskIP(ip)` 等脱敏函数。
- 运维与部署文档中已说明此策略，便于审计与用户信任。
