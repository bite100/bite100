# Windows 安装包构建指南

> 整合自：安装包构建说明、安装包构建完成说明

---

## 一、构建状态

### 已完成
- ✅ 前端构建成功（`npm run build:electron`）
- ✅ Electron 应用打包成功（`release/win-unpacked/`）
- ✅ 可执行文件：`release/win-unpacked/P2P 交易所.exe` 或 比特100 品牌名

### 当前问题
- ⚠️ **NSIS 安装包 / 代码签名**：Windows 上 electron-builder 解压代码签名工具时有权限问题，需管理员权限或使用 GitHub Actions。

---

## 二、推荐方案

### 方案 1：使用便携版（最简单）
直接使用 `frontend/release/win-unpacked/比特100.exe`（或 P2P 交易所.exe），无需安装。可复制整个 `win-unpacked` 文件夹分发。

### 方案 2：GitHub Actions（推荐生产）
1. 推送到 main 分支  
2. 在 Actions 中自动构建  
3. 从 Artifacts 下载安装包  

### 方案 3：本地管理员权限构建
以**管理员身份**运行 PowerShell：

```powershell
cd d:\P2P\frontend
$env:CSC_IDENTITY_AUTO_DISCOVERY='false'
npm run electron:build
```

### 方案 4：跳过代码签名
若不需要代码签名：

```powershell
$env:CSC_IDENTITY_AUTO_DISCOVERY='false'
$env:SKIP_NOTARIZATION='true'
npm run electron:build
```

---

## 三、构建命令

```powershell
cd frontend
npm run build:electron        # 前端构建
npm run electron:build        # Electron 打包（需管理员或禁用签名）
```

---

## 四、构建产物

| 类型 | 位置 |
|------|------|
| 便携版 | `frontend/release/win-unpacked/` |
| 安装包 | `frontend/release/比特100 Setup x.x.x.exe`（完成构建后） |

---

## 五、注意事项

1. **代码签名**：未签名时 Windows 可能显示「未知发布者」  
2. **权限**：创建 NSIS 安装包需管理员权限  
3. **便携版**：`win-unpacked` 可直接分发  

---

## 六、已集成功能

- P2P 客户端（libp2p TCP）  
- 订单签名验证（EIP-712）  
- 多链支持（Sepolia、Ethereum、Base、Arbitrum、Polygon、Optimism）  
- 跨链桥接、流动性贡献分等  

---

*项目已以 PWA/浏览器为主，桌面安装包为可选。*
